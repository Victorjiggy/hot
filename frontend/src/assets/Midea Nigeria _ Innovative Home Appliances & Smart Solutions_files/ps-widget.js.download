if(!PriceSpider || !PriceSpider["accountId"]){var PriceSpider=function(e){"use strict";const n=f(),t=u("ps-trace",!1),o=["widget","recipe","wtb4","omni"],i=e=>{const n=e.filter(e=>o.indexOf(e)>=0);return n.length?n:["widget"]};function r(e){const n=d("ps-library");if(n)return i(n.split(",").map(e=>e.trim()));const t=a("ps-library");return t?i(t.split(",").map(e=>e.trim())):e&&e.omni&&!0===e.omni.active?["omni"]:["widget"]}function c(e,n,t){const o="omni"===e?"widget":e,i=`${"widget"===e?"":e+"/"}${n}`;return t?`${i}/debug/ps-${o}.js`:`${i}/ps-${o}.js`}function s(){const e=document.getElementsByTagName("script");for(let n=0;n<e.length;++n){const t=e[n];if(t.src.indexOf("ps-widget")>=0||t.src.indexOf("ps-loader")>=0)return t.src.substr(0,t.src.lastIndexOf("/")+1)}}function a(e){const n=document.getElementsByTagName("script");for(let t=0;t<n.length;++t){const o=n[t];if(o.src.indexOf("ps-widget")>=0||o.src.indexOf("ps-loader")>=0)return o.getAttribute("data-"+e)||o.getAttribute(e)}}function l(e){const n=document.head.getElementsByTagName("meta");for(let t=0;t<n.length;++t){const o=n[t];if(o.getAttribute("name")===e)return o.getAttribute("content")}}function d(e,t){return l(e)||n[e]||t}function u(e,n=!1){const t=d(e);if(t){const e=g(t);if(void 0!==e)return e}return n}function f(e=!0,n=!0){const t={},o=e=>{new URLSearchParams(e).forEach((function(e,n){let o=decodeURIComponent(e);""===e&&(o="true"),t[n]=o}))};return e&&window.location.search.length>1&&o(window.location.search),n&&window.location.hash&&o(window.location.hash),t}function g(e){return"true"===(e=e.toLowerCase())||"yes"===e||"false"!==e&&"no"!==e&&void 0}function p(e,n,t){const o=document.createElement("script");return o.src=e,o.type="omni"===t?"module":"text/javascript",o.charset="UTF-8",function(e,n,t){void 0===n.readyState?(n.onload=()=>t(null,null),n.onerror=()=>t(function(e){const n=new Error("Not found");return n.name="LibraryLoader.loadScript",n.url=e,n.status=404,n}(e),null)):n.onreadystatechange=()=>{"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t(null,null))};document.body?document.body.appendChild(n):document.head.appendChild(n);return v("GET",e),n}(e,o,n)}function v(...e){t&&console.log(...e)}function m(...e){t&&console.error(...e)}function b(e){if(!e)return null;const n=e.split("-");if(1===n.length){const e=parseInt(n[0]);return isNaN(e)?null:{accountId:e,configId:""}}if(2===n.length){const e=parseInt(n[0]);return isNaN(e)?null:{accountId:e,configId:n[1]}}return null}function w(){const e=document.querySelectorAll(".ps-widget[ps-config]");if(0===e.length)return null;const n=new Set;return e.forEach(e=>{const t=e.getAttribute("ps-config");t&&n.add(t)}),n.size>1?null:1===n.size?Array.from(n)[0]:null}var h=Object.freeze({__proto__:null,params:n,traceEnabled:t,ensureValidLibrary:i,resolveLibraries:r,buildLibraryPath:c,getCodebaseUrl:s,getScriptParam:a,getMetaParam:l,getParam:d,getParamBoolean:u,getUrlParams:f,parseBoolean:g,parseUrlParams:function(e,n){for(const t of e){const e=t.indexOf("="),o=e>=0?t.substr(0,e):t,i=e>=0?t.substr(e+1):void 0;o in n||"function"==typeof o?n[o]instanceof Array?n[o].push(i):n[o]=[n[o],i]:n[o]=i}},loadScript:p,trace:v,error:m,parsePsKey:b,getConfigIdFromWidgetElements:w});let y,E;function S(e,n){E=n,y=p(e,e=>{e&&n(e,null)})}function I(e,n){const t=E;y&&y.parentElement.removeChild(y),y=void 0,E=void 0,t&&t(null,n)}var P=Object.freeze({__proto__:null,get element(){return y},get handler(){return E},load:S,onload:I});let C;e.account=void 0,e.widgetConfig=void 0,e.version=void 0,e.versions=void 0;const $=u("ps-debug",!1),A="https://cdn.pricespider.com/1/",L=s()||A+"lib/",O=d("ps-key"),_=O?b(O):null,x=(_?_.accountId:null)||parseInt(l("ps-account"))||parseInt(a("ps-account")),B=(_?_.configId:null)||l("ps-config")||a("ps-config")||w();let U=r();function j(){x?(v("ps-account="+x),function(n,t){S(`${A}${n}/config.js`,(o,i)=>{o||(e.account=i,e.account.id=n,e.account.version||(e.account.version=null),e.account.configs||(e.account.configs=[]),e.account.versions||(e.account.versions={widget:null,recipe:null,wtb4:null})),t(o,null)})}(x,n=>{n?m("Unable to load library, failed to load account configuration ps-account="+x,n):B?function(e,n,t){if(e){S(`${A}${n}/${e}/config.js`,(e,n)=>{e?t(e,null):t(null,n)})}else t(null,{})}(B,x,(n,t)=>{n?(m("Failed to load widget config:",n),e.widgetConfig={}):(e.widgetConfig=t,v("Widget config loaded:",t)),N()}):(e.widgetConfig={},N())})):m("Unable to load library, missing or invalid ps-account meta tag")}function N(){var n,t,o;U=r(e.widgetConfig);const i=d("ps-version")||d("ps-widget-version");e.version=i||e.account.version,e.versions={widget:e.version,recipe:d("ps-recipe-version")||(null===(n=e.account.versions)||void 0===n?void 0:n.recipe)||e.version,wtb4:d("ps-wtb4-version")||(null===(t=e.account.versions)||void 0===t?void 0:t.wtb4)||e.version,omni:d("ps-omni-version")||(null===(o=e.account.versions)||void 0===o?void 0:o.omni)||"1"},C?W():k()}function W(){e.version?U.forEach(n=>{const t=e.versions[n],o=c(n,t,$);p(`${L}${o}`,e=>{e?m("Failed to load library ps-version="+t,e):v("Loaded library ps-version="+t)},n)}):m("Unable to load library, missing or invalid library version")}function k(){if(e.account){const n=d("ps-widget-loader-check")||e.account.widgetLoaderCheck||"none";"visibility"===n?function(){let e;U.forEach(n=>{switch(n){case"widget":case"omni":e=document.querySelectorAll(".ps-widget");break;case"wtb4":e=document.querySelectorAll(".ps-ng-widget")}}),q(e,void 0),window.addEventListener("load",()=>q(e,void 0),{once:!0})}():"existence"===n?function(){let e;U.forEach(n=>{switch(n){case"widget":case"omni":e=document.querySelectorAll(".ps-widget");break;case"wtb4":e=document.querySelectorAll(".ps-ng-widget")}}),e.length&&W()}():W()}else j()}function q(e,n){e&&(n=new IntersectionObserver(t=>{t.forEach(t=>{t.intersectionRatio>.01&&(e.forEach(e=>{n.unobserve(e)}),n.disconnect,W())})},{threshold:.01}),e.forEach(e=>{n.observe(e)}))}j();const T=[];return e.Jsonp=P,e.LibraryLoader=h,e.accountId=x,e.configId=B,e.debug=$,e.deferredWidgets=T,e.insertWidget=function(n){"WidgetBinder"in PriceSpider?PriceSpider.WidgetBinder.insert(n):(e.account?W():C=!0,T.push(n))},e.onload=I,e.rebind=function(){k(),"WidgetBinder"in PriceSpider&&PriceSpider.WidgetBinder.bind()},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
}